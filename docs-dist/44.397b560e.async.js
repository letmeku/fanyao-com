(self.webpackChunkreact_nexlif=self.webpackChunkreact_nexlif||[]).push([[44],{40225:function(sn,Be,r){"use strict";r.r(Be),r.d(Be,{AliUploader:function(){return wt},ExcelPreviewURL:function(){return qe},PDFView:function(){return Mt},TextViewerURL:function(){return rt},TransferComSelect:function(){return st},TransferComTree:function(){return ct},UtilsDemo:function(){return Qt},utils:function(){return Xt}});var We=r(26068),F=r.n(We),Ge=r(48305),h=r.n(Ge),He=r(90228),te=r.n(He),Je=r(87999),de=r.n(Je),u=r(75271),me=r(64221),Qe=r(55123),e=r(52676),Xe=function(){var c=de()(te()().mark(function t(n){var s,l,i,a,d,o,m;return te()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,fetch(n);case 2:if(s=C.sent,s.ok){C.next=5;break}throw new Error("Failed to fetch Excel file.");case 5:return C.next=7,s.arrayBuffer();case 7:return l=C.sent,i=me.ij(l,{type:"array",cellDates:!0}),a=i.Sheets[i.SheetNames[0]],d=me.P6.sheet_to_json(a,{header:1,raw:!1}),o=d[0].map(function(E,p){return{Header:E,accessor:p.toString()}}),m=d.slice(1).map(function(E,p){return E.reduce(function(f,R,Z){var N=me.P6.encode_cell({r:p+1,c:Z}),v=a[N];return f[Z.toString()]=(v==null?void 0:v.t)==="d"?me.kS.format("yyyy-mm-dd",v.v):R,f},{})}),C.abrupt("return",{columns:o,data:m});case 14:case"end":return C.stop()}},t)}));return function(n){return c.apply(this,arguments)}}(),Ye=function(t){var n=t.fileUrl,s=t.height,l=s===void 0?500:s,i=(0,u.useState)([]),a=h()(i,2),d=a[0],o=a[1],m=(0,u.useState)([]),V=h()(m,2),C=V[0],E=V[1],p=(0,u.useState)(!0),f=h()(p,2),R=f[0],Z=f[1],N=(0,u.useState)(null),v=h()(N,2),H=v[0],W=v[1];(0,u.useEffect)(function(){n&&(Z(!0),Xe(n).then(function(y){var P=y.columns,k=y.data;E(P),o(k),Z(!1)}).catch(function(y){W(y.message||"Failed to load Excel file."),Z(!1)}))},[n]);var L=(0,Qe.useTable)({columns:(0,u.useMemo)(function(){return C},[C]),data:(0,u.useMemo)(function(){return d},[d])}),J=L.getTableProps,G=L.getTableBodyProps,x=L.headerGroups,S=L.rows,O=L.prepareRow;return R?(0,e.jsx)("div",{className:"loading-spinner",children:"\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u5019..."}):H?(0,e.jsxs)("div",{className:"error-message",children:["\u51FA\u9519\u5566\uFF1A",H]}):(0,e.jsx)("div",{className:"table-container",style:{height:"".concat(l,"px")},children:(0,e.jsxs)("table",F()(F()({},J()),{},{className:"excel-table",children:[(0,e.jsx)("thead",{children:x.map(function(y,P){return(0,u.createElement)("tr",F()(F()({},y.getHeaderGroupProps()),{},{key:P}),y.headers.map(function(k,$){return(0,e.jsx)("th",F()(F()({},k.getHeaderProps()),{},{children:k.render("Header")}),$)}))})}),(0,e.jsx)("tbody",F()(F()({},G()),{},{children:S.map(function(y,P){return O(y),(0,e.jsx)("tr",F()(F()({},y.getRowProps()),{},{children:y.cells.map(function(k,$){return(0,e.jsx)("td",F()(F()({},k.getCellProps()),{},{children:k.render("Cell")}),$)})}),P)})}))]}))})},qe=Ye,_e=function(t){return t[0]===239&&t[1]===187&&t[2]===191},et=function(t){return t[0]===255&&t[1]===254},tt=function(t){return t[0]===254&&t[1]===255},nt=function(t){var n=t.fileUrl,s=t.height,l=s===void 0?500:s,i=(0,u.useState)(""),a=h()(i,2),d=a[0],o=a[1],m=(0,u.useState)(!0),V=h()(m,2),C=V[0],E=V[1],p=(0,u.useState)(null),f=h()(p,2),R=f[0],Z=f[1],N=(0,u.useCallback)(function(v){var H=new Uint8Array(v),W=[{check:_e,encoding:"utf-8"},{check:et,encoding:"utf-16le"},{check:tt,encoding:"utf-16be"}],L=W.find(function(P){var k=P.check;return k(H)});if(L){try{var J=new TextDecoder(L.encoding,{fatal:!0});o(J.decode(v)),E(!1)}catch(P){Z("\u89E3\u7801\u5931\u8D25\uFF1A".concat(P.message)),E(!1)}return}for(var G=["utf-8","gb18030","iso-8859-1"],x=0,S=G;x<S.length;x++){var O=S[x];try{var y=new TextDecoder(O,{fatal:!0});o(y.decode(v)),E(!1);return}catch(P){}}Z("\u65E0\u6CD5\u89E3\u7801\u8BE5\u6587\u4EF6"),E(!1)},[]);return(0,u.useEffect)(function(){n&&(E(!0),fetch(n).then(function(v){if(!v.ok)throw new Error("\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25");return v.arrayBuffer()}).then(N).catch(function(v){Z(v.message==="Failed to fetch"?"\u65E0\u6CD5\u83B7\u53D6\u6587\u4EF6\uFF0C\u8BF7\u68C0\u67E5 URL \u6216\u7F51\u7EDC\u8FDE\u63A5":"\u53D1\u751F\u9519\u8BEF\uFF1A".concat(v.message)),E(!1)}))},[n,N]),C?(0,e.jsx)("div",{className:"viewerContainer loading",children:(0,e.jsx)("span",{children:"\u52A0\u8F7D\u4E2D..."})}):R?(0,e.jsx)("div",{className:"viewerContainer error",children:(0,e.jsx)("span",{children:R})}):(0,e.jsx)("div",{className:"viewerContainer",children:(0,e.jsx)("div",{className:"viewerContent",children:(0,e.jsx)("pre",{style:{height:"".concat(l,"px")},children:d})})})},rt=nt,at=r(15558),q=r.n(at),Ne=r(14572),Oe=r(66152),pe=r(16020),ke=r(88407),ut=function(t){var n=t.loadDataFetch,s=t.treeData,l=s===void 0?[]:s,i=t.type,a=i===void 0?0:i,d=t.selectedData,o=d===void 0?[]:d,m=t.handleChange,V=t.className,C=t.style,E=t.placeholder,p=E===void 0?"\u8BF7\u8F93\u5165":E,f=t.switchText,R=f===void 0?{onlyThisLevel:"\u53EA\u9009\u672C\u7EA7",on:"\u5F00",off:"\u5173"}:f,Z=t.emptyText,N=Z===void 0?"\u6682\u65E0\u6570\u636E":Z,v=(0,u.useState)(!0),H=h()(v,2),W=H[0],L=H[1],J=(0,u.useState)([]),G=h()(J,2),x=G[0],S=G[1],O=(0,u.useState)(l),y=h()(O,2),P=y[0],k=y[1],$=(0,u.useState)(!1),X=h()($,2),le=X[0],ue=X[1],b=function T(j,w,ne){return j.forEach(function(se){se.key===w?se.children=ne:se.children&&T(se.children,w,ne)})},D=function(j){return new Promise(function(w){ue(!0),n({parentId:j.id}).then(function(ne){var se=ne.map(function(Q){return F()(F()({},Q),{},{isLeaf:Q==null?void 0:Q.leaf,key:Q==null?void 0:Q.id,value:Q==null?void 0:Q.id})});b(P,j.props.eventKey,se),k(q()(P)),ue(!1),w(P)}).catch(function(){return ue(!1)})})},A=function(j){S(j.map(function(w){return(w==null?void 0:w.value)||w}))};(0,u.useEffect)(function(){(o==null?void 0:o.length)>0&&S(o.map(function(T){return T==null?void 0:T.id}))},[o]),(0,u.useEffect)(function(){m&&m({selectedIds:x,type:a})},[x,m,a]);var K=(0,u.useCallback)(function(T,j){return j.title.toLowerCase().includes(T.toLowerCase())},[]),_=Ne.Z.SHOW_ALL,re={treeData:P,value:x,onChange:A,treeCheckStrictly:W,treeCheckable:!0,showCheckedStrategy:_,placeholder:p,loadData:D,showSearch:!0,filterTreeNode:K,dropdownRender:function(j){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"switch",children:[(0,e.jsx)("span",{children:R.onlyThisLevel}),(0,e.jsx)(Oe.Z,{checkedChildren:R.on,unCheckedChildren:R.off,checked:W,onChange:function(ne){S([]),L(ne)}})]}),(0,e.jsx)(pe.Z,{spinning:le,children:P.length===0&&!le?(0,e.jsx)(ke.Z,{image:ke.Z.PRESENTED_IMAGE_SIMPLE,description:N}):j})]})},className:V,style:F()({width:"100%"},C)};return(0,e.jsx)(Ne.Z,F()({},re))},st=ut,be=r(57983),it=r(41253),he=r(68608),lt=r(81458);function Ue(c,t,n){return c.some(function(s,l){return s.key===t?(c[l]=F()(F()({},s),{},{children:n}),!0):s.children?Ue(s.children,t,n):!1})}var ot=function(t){var n=t.loadDataFetch,s=t.treeData,l=s===void 0?[]:s,i=t.type,a=i===void 0?0:i,d=t.selectedData,o=d===void 0?[]:d,m=t.isShow,V=m===void 0?!1:m,C=t.handleChange,E=(0,u.useState)([]),p=h()(E,2),f=p[0],R=p[1],Z=(0,u.useState)(l),N=h()(Z,2),v=N[0],H=N[1],W=(0,u.useState)(!0),L=h()(W,2),J=L[0],G=L[1],x=(0,u.useState)(""),S=h()(x,2),O=S[0],y=S[1],P=[],k=function b(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];D.forEach(function(A){P.push(A),A.children&&b(A.children)})};k(v);var $=function(D,A){return D.includes(A)},X=function b(D,A){return D.filter(function(K){return!O||K.title.toLowerCase().includes(O.toLowerCase())}).map(function(K){return F()(F()({},K),{},{disabled:A.includes(K.key),children:K.children?b(K.children,A):void 0})})},le=function(){var b=de()(te()().mark(function D(A){var K,_;return te()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,n({parentId:A.id||A.key});case 2:K=T.sent,_=K.map(function(j){return{key:j.id,title:j.name,id:j.id,description:j.description||"ID: ".concat(j.id),icon:j.icon||(0,e.jsx)(be.Z,{}),isLeaf:j.leaf}}),Ue(v,A.key,_),H(q()(v));case 6:case"end":return T.stop()}},D)}));return function(A){return b.apply(this,arguments)}}();(0,u.useEffect)(function(){C&&C({list:f.map(function(b){return{orgId:b}}),type:a})},[f,C,a]),(0,u.useEffect)(function(){o.length&&R(o.map(function(b){return b.orgId}))},[o]);var ue=function(D){return(0,e.jsxs)("span",{children:[D.icon," ",D.title," ",(0,e.jsx)("small",{style:{color:"#888"},children:D.description})]})};return(0,e.jsx)(it.Z,{titles:V?["\u672A\u6388\u6743\u90E8\u95E8","\u5DF2\u6388\u6743\u90E8\u95E8 (".concat(f.length,")")]:void 0,targetKeys:f,dataSource:P,className:"tree-transfer",render:function(D){return D.title},onChange:R,showSelectAll:!1,children:function(D){var A=D.direction,K=D.onItemSelect,_=D.selectedKeys;return A==="left"?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"switch",children:[(0,e.jsx)("span",{children:"\u53EA\u9009\u672C\u7EA7"}),(0,e.jsx)(Oe.Z,{checkedChildren:"\u5F00",unCheckedChildren:"\u5173",checked:J,onChange:function(T){R([]),G(T)}})]}),(0,e.jsx)("div",{className:"search",children:(0,e.jsx)(he.Z,{placeholder:"\u641C\u7D22\u90E8\u95E8",prefix:(0,e.jsx)(be.Z,{}),value:O,onChange:function(T){return y(T.target.value)},style:{marginBottom:"10px"}})}),(0,e.jsx)("div",{className:"tree",children:(0,e.jsx)(lt.Z,{blockNode:!0,checkable:!0,checkStrictly:J,checkedKeys:[].concat(q()(_),q()(f)),treeData:X(v,f),onCheck:function(T,j){var w=j.node;return K(w.key,!$([].concat(q()(_),q()(f)),w.key))},onSelect:function(T,j){var w=j.node;return K(w.key,!$([].concat(q()(_),q()(f)),w.key))},loadData:le,titleRender:ue})})]}):null}})},ct=ot,dt=r(69535),Ae=r(63888),Re=r(68379),ae=r(44143),ft=r(61958),$e=r(56200),Ce=r(19819),ht=r(41998),vt=r(87710),mt=r(61413),pt=r(25770),Ie=r(36199),gt=r(10995),Ve=r(99904),St=r(30598),xt=function(t){var n=t.file,s=t.onRemove,l=t.onEdit,i=t.onSelect,a=t.selected,d=(0,u.useState)(!1),o=h()(d,2),m=o[0],V=o[1],C=(0,u.useState)(!1),E=h()(C,2),p=E[0],f=E[1],R=(0,u.useState)(n.name),Z=h()(R,2),N=Z[0],v=Z[1],H=(0,u.useState)(n.note||""),W=h()(H,2),L=W[0],J=W[1],G=n.type==="image",x=function(){l(F()(F()({},n),{},{name:N,note:L})),f(!1)};return(0,e.jsxs)(Ie.Z,{className:G?"imageList":"fileList",children:[(0,e.jsx)(gt.Z,{checked:a,onChange:function(O){return i(n.uid,O.target.checked)}}),(0,e.jsxs)("span",{onClick:function(){return!G&&V(!0)},style:{cursor:"pointer",flex:1},children:[G?(0,e.jsx)(Ve.Z,{src:n.thumbUrl,width:48}):(0,e.jsx)(ht.Z,{}),(0,e.jsxs)("span",{className:"fileName",title:n.name,children:[n.name," ",n.note&&(0,e.jsxs)("small",{children:["(",n.note,")"]}),n.cloudUrl&&(0,e.jsx)("small",{style:{color:"#52c41a"},children:" (\u5DF2\u540C\u6B65\u4E91\u7AEF)"})]})]}),n.status==="uploading"&&(0,e.jsx)(St.Z,{percent:n.percent,size:"small"}),(0,e.jsxs)(Ie.Z,{children:[(0,e.jsx)(vt.Z,{className:"previewBtn",onClick:function(){return V(!0)}}),(0,e.jsx)(mt.Z,{className:"editBtn",onClick:function(){return f(!0)}}),(0,e.jsx)(pt.Z,{className:"deleteBtn",onClick:s})]}),(0,e.jsx)(Ce.Z,{open:m,title:n.name,footer:null,onCancel:function(){return V(!1)},children:G?(0,e.jsx)(Ve.Z,{src:n.url,style:{width:"100%"}}):(0,e.jsx)("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",children:"\u70B9\u51FB\u4E0B\u8F7D\u67E5\u770B"})}),(0,e.jsxs)(Ce.Z,{open:p,title:"\u7F16\u8F91\u6587\u4EF6\u4FE1\u606F",onOk:x,onCancel:function(){return f(!1)},children:[(0,e.jsx)(he.Z,{value:N,onChange:function(O){return v(O.target.value)},placeholder:"\u6587\u4EF6\u540D\u79F0",style:{marginBottom:"10px"}}),(0,e.jsx)(he.Z,{value:L,onChange:function(O){return J(O.target.value)},placeholder:"\u6DFB\u52A0\u5907\u6CE8"})]})]})},Ft=r(2595),ye=r.n(Ft);function je(c){return/\.(png|jpg|jpeg|gif)$/i.test(c)?"image":/\.(doc|docx|pdf|xls|xlsx|pptx)$/i.test(c)?"document":"other"}function Ct(c,t,n){return Ee.apply(this,arguments)}function Ee(){return Ee=de()(te()().mark(function c(t,n,s){var l,i,a;return te()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(n){o.next=2;break}throw new Error("OSS \u914D\u7F6E\u672A\u63D0\u4F9B");case 2:if(!Object.values(n).some(function(m){return!m})){o.next=5;break}return ae.ZP.error("OSS \u914D\u7F6E\u4E0D\u5B8C\u6574"),o.abrupt("return");case 5:return l=new(ye())({region:n.region,accessKeyId:n.accessKeyId,accessKeySecret:n.accessKeySecret,bucket:n.bucket}),i="".concat(Date.now(),"-").concat(t.name),o.next=9,l.put(i,t);case 9:if(a=o.sent,a.res.status===200){o.next=12;break}throw new Error("OSS \u4E0A\u4F20\u5931\u8D25");case 12:return s({percent:100,uid:"".concat(Date.now(),"-").concat(Math.random()),fileId:i,name:a.name,url:a.url,status:"done",cloudUrl:a.url,type:je(t.name),uploadTime:Date.now()}),o.abrupt("return",{thumbUrl:a.url,uid:"".concat(Date.now(),"-").concat(Math.random()),fileId:i,name:a.name,url:a.url,status:"done",type:je(t.name),uploadTime:Date.now()});case 14:case"end":return o.stop()}},c)})),Ee.apply(this,arguments)}function yt(c,t,n){return De.apply(this,arguments)}function De(){return De=de()(te()().mark(function c(t,n,s){var l,i;return te()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n){d.next=2;break}throw new Error("OSS \u914D\u7F6E\u672A\u63D0\u4F9B");case 2:if(!Object.values(n).some(function(o){return!o})){d.next=5;break}return ae.ZP.error("OSS \u914D\u7F6E\u4E0D\u5B8C\u6574"),d.abrupt("return");case 5:return l=new(ye())({region:n.region,accessKeyId:n.accessKeyId,accessKeySecret:n.accessKeySecret,bucket:n.bucket}),d.next=8,l.delete(t);case 8:if(i=d.sent,i.res.status===204){d.next=11;break}throw new Error("OSS \u5220\u9664\u5931\u8D25");case 11:ae.ZP.success("(".concat(t,")-oss\u6587\u4EF6\u5220\u9664\u6210\u529F")),s(i);case 13:case"end":return d.stop()}},c)})),De.apply(this,arguments)}function jt(c,t){return Te.apply(this,arguments)}function Te(){return Te=de()(te()().mark(function c(t,n){var s,l;return te()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}throw new Error("OSS \u914D\u7F6E\u672A\u63D0\u4F9B");case 2:if(!Object.values(t).some(function(d){return!d})){a.next=5;break}return ae.ZP.error("OSS \u914D\u7F6E\u4E0D\u5B8C\u6574"),a.abrupt("return");case 5:return s=new(ye())({region:t.region,accessKeyId:t.accessKeyId,accessKeySecret:t.accessKeySecret,bucket:t.bucket}),a.next=8,s.list();case 8:if(l=a.sent,l.res.status===200){a.next=11;break}throw new Error("OSS \u4E0A\u4F20\u5931\u8D25");case 11:n(l);case 12:case"end":return a.stop()}},c)})),Te.apply(this,arguments)}function Et(c,t,n){var s=t.split(",").map(function(a){return a.trim()}),l=s.some(function(a){return c.name.endsWith(a)}),i=c.size/1024/1024<n;return l||ae.ZP.warning("\u4E0A\u4F20\u6587\u4EF6\u683C\u5F0F\u4E0D\u652F\u6301"),i||ae.ZP.warning("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7".concat(n,"MB")),l&&i}var Dt=Ae.Z.Panel,Ke=Re.Z.Option,Tt=function(t){var n=t.accept,s=n===void 0?".doc,.docx,.xls,.xlsx,.pdf,.pptx,.png,.jpg":n,l=t.uploadName,i=l===void 0?"\u4E0A\u4F20\u6587\u4EF6":l,a=t.listType,d=a===void 0?"text":a,o=t.maxCount,m=o===void 0?1:o,V=t.maxBytes,C=V===void 0?20:V,E=t.multiple,p=E===void 0?!1:E,f=t.fileList,R=f===void 0?[]:f,Z=t.ossConfig,N=t.showUploadList,v=N===void 0?!0:N,H=t.disabled,W=H===void 0?!1:H,L=t.extraTip,J=t.showTips,G=J===void 0?!0:J,x=t.onChange,S=t.onLoading,O=t.onSuccess,y=t.filedIds,P=(0,u.useState)(R),k=h()(P,2),$=k[0],X=k[1],le=(0,u.useState)(!1),ue=h()(le,2),b=ue[0],D=ue[1],A=(0,u.useState)("time"),K=h()(A,2),_=K[0],re=K[1],T=(0,u.useState)([]),j=h()(T,2),w=j[0],ne=j[1],se=(0,u.useState)(!1),Q=h()(se,2),Se=Q[0],z=Q[1],I=(0,u.useState)(""),oe=h()(I,2),xe=oe[0],Me=oe[1],Yt=function(){var M=de()(te()().mark(function B(g,U){var ee,fe,ze,Ze,Fe;return te()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(Et(g,s,C),ee=p&&U?U:[g],!(ee.length>m)){Y.next=5;break}return ae.ZP.warning("\u6700\u591A\u4E0A\u4F20".concat(m,"\u4E2A\u6587\u4EF6")),Y.abrupt("return");case 5:return D(!0),S==null||S(!0),fe=ee.map(function(ce){return{uid:"".concat(Date.now(),"-").concat(Math.random()),name:ce.name,thumbUrl:"",status:"",percent:0,type:"other",uploadTime:Date.now()}}),ze=m===1?fe:[].concat(q()($),q()(fe)),X(ze),Y.prev=10,Y.next=13,Promise.all(ee.map(function(ce,ve){return Ct(ce,Z,function(Le){X(function(un){return un.map(function(Pe){return Pe.uid===fe[ve].uid?F()(F()({},Pe),Le):Pe})})}),ce}));case 13:Ze=Y.sent,Fe=m===1?Ze:$,x==null||x(Fe),O==null||O(Fe),y==null||y(Fe.map(function(ce){return ce.uid})),ae.ZP.success("".concat(Ze.length,"\u4E2A\u6587\u4EF6\u4E0A\u4F20\u6210\u529F")),Y.next=25;break;case 21:Y.prev=21,Y.t0=Y.catch(10),X(function(ce){return ce.map(function(ve){return fe.some(function(Le){return Le.uid===ve.uid})?F()(F()({},ve),{},{status:"error"}):ve})}),ae.ZP.error("\u90E8\u5206\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25");case 25:return Y.prev=25,D(!1),S==null||S(!1),Y.finish(25);case 29:case"end":return Y.stop()}},B,null,[[10,21,25,29]])}));return function(g,U){return M.apply(this,arguments)}}(),qt=function(B){yt(B.name,Z,function(){var g=$.filter(function(U){return U.uid!==B.uid});X(g),ne(function(U){return U.filter(function(ee){return ee!==B.uid})}),x==null||x(g),y==null||y(g.map(function(U){return U.uid}))})},_t=function(B){var g=$.map(function(U){return U.uid===B.uid?B:U});X(g),x==null||x(g)},en=function(B,g){ne(function(U){return g?[].concat(q()(U),[B]):U.filter(function(ee){return ee!==B})})},tn=function(){if(w.length===0){ae.ZP.warning("\u8BF7\u5148\u9009\u62E9\u6587\u4EF6");return}z(!0)},nn=function(){var B=$.map(function(g){return w.includes(g.uid)?F()(F()({},g),{},{note:xe}):g});X(B),x==null||x(B),z(!1),ne([]),Me("")},rn={image:$.filter(function(M){return M.type==="image"}),document:$.filter(function(M){return M.type==="document"}),other:$.filter(function(M){return M.type==="other"})},an=function(B){return B.sort(function(g,U){return _==="time"?U.uploadTime-g.uploadTime:g.name.localeCompare(U.name)})};return(0,u.useEffect)(function(){jt(Z,function(M){var B=M.objects.map(function(g){return{uid:"r.name+".concat(Date.now(),"-").concat(Math.random()),name:g.name,thumbUrl:g.url,url:g.url,status:"done",percent:100,type:je(g.name),uploadTime:g.lastModified}});X(function(g){return[].concat(q()(g),q()(B))})})},[]),(0,e.jsxs)("div",{className:"fileUpload",children:[(0,e.jsxs)(ft.Z.Dragger,{accept:s,listType:d,maxCount:m,multiple:p,beforeUpload:Yt,fileList:[],disabled:W||b,children:[(0,e.jsx)($e.ZP,{icon:(0,e.jsx)(dt.Z,{}),loading:b,disabled:W,children:i}),G&&(0,e.jsx)("div",{className:"tip",children:"\u652F\u6301".concat(C,"MB\u4EE5\u5185\u7684").concat(s,"\u6587\u4EF6\uFF08\u53EF\u62D6\u62FD\u4E0A\u4F20\uFF0C\u76F4\u63A5\u5B58\u81F3 OSS\uFF09")})]}),v&&(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{margin:"10px 0px"},children:[(0,e.jsxs)(Re.Z,{value:_,onChange:re,style:{width:120,marginRight:10},children:[(0,e.jsx)(Ke,{value:"time",children:"\u6309\u65F6\u95F4\u6392\u5E8F"}),(0,e.jsx)(Ke,{value:"name",children:"\u6309\u540D\u79F0\u6392\u5E8F"})]}),(0,e.jsxs)($e.ZP,{onClick:tn,disabled:w.length===0,children:["\u6279\u91CF\u7F16\u8F91 (",w.length,")"]})]}),(0,e.jsx)(Ae.Z,{defaultActiveKey:["image","document","other"],children:Object.entries(rn).map(function(M){var B=h()(M,2),g=B[0],U=B[1];return U.length>0?(0,e.jsx)(Dt,{header:"".concat(g==="image"?"\u56FE\u7247":g==="document"?"\u6587\u6863":"\u5176\u4ED6"," (").concat(U.length,")"),children:an(U).map(function(ee){return(0,e.jsx)(xt,{file:ee,onRemove:function(){return qt(ee)},onEdit:_t,onSelect:en,selected:w.includes(ee.uid)},ee.uid)})},g):null})})]}),L&&(0,e.jsx)("div",{className:"extraTip",children:L}),(0,e.jsx)(Ce.Z,{open:Se,title:"\u6279\u91CF\u7F16\u8F91 (".concat(w.length," \u4E2A\u6587\u4EF6)"),onOk:nn,onCancel:function(){return z(!1)},children:(0,e.jsx)(he.Z,{value:xe,onChange:function(B){return Me(B.target.value)},placeholder:"\u8F93\u5165\u7EDF\u4E00\u5907\u6CE8"})})]})},wt=Tt,Zt=r(30967),ie=r(81827),Lt=r(28059),Pt=r(99733),Bt=r(28339),Nt=r(79615),Ot=r(90438),kt=r(8977),bt=r(79270),Ut=r(41458),At=r(36185),Rt=r(33906),$t=r(32482),ge=r(32134),It=r(19621),Vt=r.n(It);ge.v0.GlobalWorkerOptions.workerSrc=Vt();var Kt=function(t){var n=t.file,s=t.parentDom,l=t.onClose,i=600,a=(0,u.useRef)(null),d=(0,u.useState)(0),o=h()(d,2),m=o[0],V=o[1],C=(0,u.useState)(1),E=h()(C,2),p=E[0],f=E[1],R=(0,u.useState)(i),Z=h()(R,2),N=Z[0],v=Z[1],H=(0,u.useState)(!1),W=h()(H,2),L=W[0],J=W[1],G=(0,u.useState)(0),x=h()(G,2),S=x[0],O=x[1],y=(0,u.useState)(!1),P=h()(y,2),k=P[0],$=P[1],X=(0,u.useState)([1]),le=h()(X,2),ue=le[0],b=le[1],D=s||document.body,A=(0,u.useCallback)(function(z){var I=z.numPages;V(I)},[]),K=function(){return p>1&&f(p-1)},_=function(){return p<m&&f(p+1)},re=function(I){var oe=Math.max(1,Math.min(m,Number(I.target.value)||1));f(oe),b([oe])},T=function(){return v(N*1.2)},j=function(){return N>i&&v(N*.8)},w=function(){v(L?i:D.offsetWidth-50),J(!L)},ne=function(){return O(function(I){return(I-90)%360})},se=function(){return O(function(I){return(I+90)%360})},Q=function(){return $(!k)};(0,u.useEffect)(function(){if(!k)b([p]);else{var z=Math.max(1,p-2),I=Math.min(m,p+2);b(Array.from({length:I-z+1},function(oe,xe){return z+xe}))}},[p,k,m]),(0,u.useEffect)(function(){return f(1)},[n]),(0,u.useEffect)(function(){a.current&&(a.current.scrollTop=0)},[p]);var Se=function(){return(0,e.jsx)("div",{className:"view",children:(0,e.jsxs)("div",{className:"viewContent",children:[(0,e.jsx)("div",{className:"pageMain",ref:a,children:(0,e.jsx)("div",{className:"pageContainer",children:(0,e.jsx)(ge.BB,{file:n,onLoadSuccess:A,error:(0,e.jsx)("div",{style:{textAlign:"center",width:i+"px"},children:(0,e.jsx)(Lt.Z,{style:{fontSize:"150px",color:"#fe725c",margin:"100px"}})}),loading:(0,e.jsx)("div",{style:{textAlign:"center",width:i+"px"},children:(0,e.jsx)(pe.Z,{size:"large",style:{margin:"200px"}})}),children:k?(0,e.jsx)("div",{className:"thumbnailContainer",children:Array.from({length:m},function(I,oe){return oe+1}).map(function(I){return(0,e.jsxs)("div",{className:"thumbnail",onClick:function(){f(I),$(!1)},children:[ue.includes(I)?(0,e.jsx)(ge.T3,{pageNumber:I,width:150,rotate:S,loading:(0,e.jsx)(pe.Z,{}),renderTextLayer:!1,renderAnnotationLayer:!1}):(0,e.jsxs)("div",{className:"thumbnailPlaceholder",children:["\u7B2C ",I," \u9875"]}),(0,e.jsxs)("span",{children:["\u7B2C ",I," \u9875"]})]},I)})}):(0,e.jsx)(ge.T3,{pageNumber:p,width:N,rotate:S,loading:(0,e.jsx)(pe.Z,{size:"large"}),renderTextLayer:!1,renderAnnotationLayer:!1,error:function(){return f(1)}})})})}),(0,e.jsx)("div",{className:"pageBar",children:(0,e.jsxs)("div",{className:"pageTool",children:[(0,e.jsx)(ie.Z,{title:p===1?"\u5DF2\u662F\u7B2C\u4E00\u9875":"\u4E0A\u4E00\u9875",children:(0,e.jsx)(Pt.Z,{onClick:K})}),(0,e.jsx)(he.Z,{value:p,onChange:re,onPressEnter:re,type:"number"})," ","/ ",m,(0,e.jsx)(ie.Z,{title:p===m?"\u5DF2\u662F\u6700\u540E\u4E00\u9875":"\u4E0B\u4E00\u9875",children:(0,e.jsx)(Bt.Z,{onClick:_})}),(0,e.jsx)(ie.Z,{title:"\u653E\u5927",children:(0,e.jsx)(Nt.Z,{onClick:T})}),(0,e.jsx)(ie.Z,{title:"\u7F29\u5C0F",children:(0,e.jsx)(Ot.Z,{onClick:j})}),(0,e.jsx)(ie.Z,{title:"\u5411\u5DE6\u65CB\u8F6C",children:(0,e.jsx)(kt.Z,{onClick:ne})}),(0,e.jsx)(ie.Z,{title:"\u5411\u53F3\u65CB\u8F6C",children:(0,e.jsx)(bt.Z,{onClick:se})}),(0,e.jsx)(ie.Z,{title:k?"\u5173\u95ED\u7F29\u7565\u56FE":"\u663E\u793A\u7F29\u7565\u56FE",children:(0,e.jsx)(Ut.Z,{onClick:Q})}),(0,e.jsx)(ie.Z,{title:L?"\u6062\u590D\u9ED8\u8BA4":"\u9002\u5408\u7A97\u53E3",children:L?(0,e.jsx)(At.Z,{onClick:w}):(0,e.jsx)(Rt.Z,{onClick:w})}),l&&(0,e.jsx)(ie.Z,{title:"\u5173\u95ED",children:(0,e.jsx)($t.Z,{onClick:l})})]})})]})})};return s?Se():(0,Zt.createPortal)(Se(),D)},Mt=Kt,zt=function(t){var n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],s=n[1]||"",l=n[2]||"";if(/trident/i.test(s)){var i=/\brv[ :]+(\d+)/g.exec(t);return{name:"IE",version:(i==null?void 0:i[1])||""}}if(s==="Chrome"){var a=t.match(/\b(OPR|Edge)\/(\d+)/);if(a)return{name:a[1]==="OPR"?"Opera":"Edge",version:a[2]}}var d=t.match(/version\/(\d+)/i);return d&&(l=d[1]),s=s||navigator.appName,l=l||navigator.appVersion,{name:s,version:l}},Wt={Chrome:{minVersion:73,message:"\u8BF7\u4F7F\u7528 Chrome 73 \u6216\u4EE5\u4E0A\u7248\u672C\u7684\u6D4F\u89C8\u5668"},Firefox:{minVersion:69,message:"\u8BF7\u4F7F\u7528 Firefox 69 \u6216\u4EE5\u4E0A\u7248\u672C\u7684\u6D4F\u89C8\u5668"}},Gt=function(t){var n=t.name,s=t.version,l=Wt[n],i="color: red; font-size: 20px; font-weight: bold;";if(!l)return console.info("%c\u4E0D\u652F\u6301\u7684\u6D4F\u89C8\u5668\uFF1A".concat(n,"\uFF0C\u63A8\u8350\u4F7F\u7528 Chrome 73+"),i),!1;var a=parseInt(s,10);return a<l.minVersion?(console.info("%c\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E (".concat(n," ").concat(s,")\uFF0C").concat(l.message),i),!1):(console.info("%c\u652F\u6301 ".concat(n," ").concat(s,"\uFF0C\u63A8\u8350\u4F7F\u7528\u6700\u65B0 Chrome \u6D4F\u89C8\u5668\uFF01"),"color: green; font-size: 20px;"),!0)};function Ht(){var c=zt(navigator.userAgent);return console.table(c),Gt(c),c}var we=Ht,Jt=function(){return(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{children:"\u6D4F\u89C8\u5668\u5DE5\u5177\u6D4B\u8BD5"}),(0,e.jsx)("p",{children:we().name+""+we().version})]})},Qt=Jt,Xt={browserVersionTest:we}},42740:function(){},77665:function(){},85491:function(){},74622:function(){},81328:function(){},69071:function(){},24863:function(){}}]);
